<div>
  <div class="Polaris-Labelled__LabelWrapper">
    <div class="Polaris-Label">
      <%= @form.label(@attribute, @label, { class: 'Polaris-Label__Text' }) %>
    </div>
  </div>

  <div class="Polaris-Connected">
    <% if connected_left.present? %>
      <div class="Polaris-Connected__Item">
        <%= connected_left %>
      </div>
    <% end %>

    <div class="Polaris-Connected__Item Polaris-Connected__Item--primary">
      <div class="Polaris-TextField Polaris-TextField--hasValue<%if @error.present? %> Polaris-TextField--error<% end %>">
        <%= @form.send(
              input,
              @attribute,
              {
                class: 'Polaris-TextField__Input',
                placeholder: @placeholder,
                rows: @multiline || nil
              }
            ) %>
        <div class="Polaris-TextField__Backdrop"></div>
      </div>
    </div>

    <% if connected_right.present? %>
      <div class="Polaris-Connected__Item">
        <%= connected_right %>
      </div>
    <% end %>
  </div>

  <% if @error.present? %>
    <div class="Polaris-Labelled__Error">
      <div class="Polaris-InlineError">
        <div class="Polaris-InlineError__Icon">
          <%= render Polaris::Icon::Component.new do %>
            <path d="M10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16zM9 9a1 1 0 0 0 2 0V7a1 1 0 1 0-2 0v2zm0 4a1 1 0 1 0 2 0 1 1 0 0 0-2 0z"></path>
          <% end %>
        </div> <%= @error.capitalize %>
      </div>
    </div>
  <% end %>
</div>
